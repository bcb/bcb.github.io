---
layout: post
title: "ECR Image Repositories"
categories: aws ecr
---
{::options syntax_highlighter_opts="default_lang: shell" /}

<div class="note">
    Not all AWS regions support ECR. If like me, your default region is not
    supported, remember to specify the region whenever using ecr commands (e.g.
    aws ecr --region us-west-2).
</div>

Login to the ECR registry
=========================

Docker must be logged into the registry. The aws client can output the required
docker command to login with.

    $ aws ecr get-login

Paste the output to login.

Create repository
=================

    $ aws ecr create-repository --repository-name project/web-app

Push an image
=============

First tag it:

    $ docker tag myimage aws_account_id.dkr.ecr.us-west-2.amazonaws.com/project/web-app

Then push:

    $ docker push aws_account_id.dkr.ecr.us-west-2.amazonaws.com/project/web-app

Useful commands
===============

Delete an image:

    $ aws ecr batch-delete-image --repository-name project/web-app --image-ids imageTag=latest

Delete repository:

    $ aws ecr delete-repository --repository-name project/web-app

List images:

    $ aws ecr list-images --repository-name project/web-app
